<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Detail</title>
    <style>
        table,
        th,
        td {
            border: 1px solid black;
            background-color: rgb(209, 231, 240);
        }

        td {
            padding: 12px;
        }

       
        #comment{
            padding: 12px;
        }
    </style>
</head>

<body>
    <div>

        <table id="tableId">
        </table>
    </div>
    <button onclick="getComments()">Show Comments</button>
    <p>comments:</p>
    <div id="comment"></div>
</body>
<script>
    let object = {}
    let page = 1
    function createTable(data, pageno) {

        const keys = Object.keys(data);
        let temp = "<tr> ";
        for (let i = 0; i < keys.length; i++) {
            temp = temp + "<th>" + keys[i] + "</th>"
        }
        temp += "</tr>"

        let vals = Object.values(data);
        let temp2 = "<tr>";
        for (let i = 0; i < vals.length; i++) {
            let valsLis = Object.values(vals[i])
         
            temp2 = temp2 + "<td>" + vals[i] + "</td>"
        }
        temp2 += "</tr>"
        document.getElementById('tableId').innerHTML = temp + temp2

    }

    async function getComments(){
        let commentObj = await fetch(`https://jsonplaceholder.typicode.com/posts/<%=id%>/comments`).then(response => {return response.json()})
        console.log('commentObj',commentObj);
        const idarray = document.location.pathname.split("/");
        const id = idarray[idarray.length -1]
        console.log(id)

        // let commentObj2 = commentObj.filter(function (el) {
        //     return el.postId == id;

        // })
        console.log('ds',commentObj)
        let commentEl = document.getElementById('comment');

        if(commentEl.style.display == ""){

            commentEl.style.display = "none"
        }
        else{
            commentEl.style.display = ""
            commentEl.innerHTML = ""
        }
        for(let comment of commentObj){
            commentEl.innerHTML += '<p>' + comment.name +'</p>'+ '<br>'

        }
    }

    const res = fetch('https://jsonplaceholder.typicode.com/posts/<%=id%>')
        .then(response => { return response.json() })
        .then(data => {
            object = data
            createTable(data, 1)
        })
</script>

</html>